# インターン掲示板 タスクリスト

## 認証機能

### 🟡 ユーザー認証の基本実装

- [~] ユーザー登録機能の実装

  - [x] Supabase認証の実装
  - [x] UserProfileテーブルとの連携
  - [x] 登録完了後の自動ログイン実装
  - 見積時間: 2時間

- [~] ログイン機能の改善
  - [x] ログイン後のリダイレクト先を掲示板トップページに変更
  - [x] エラーメッセージの日本語化
  - 見積時間: 1時間

### 🟢 ユーザー情報管理

- [~] ユーザー情報編集機能

  - [x] 編集フォームの作成
  - [x] バリデーション実装
  - [x] 確認画面の実装
  - 見積時間: 2時間

- [~] ユーザー退会機能
  - [x] 退会確認画面の実装
  - [x] 論理削除の実装
  - [x] 関連投稿の非表示設定
  - 見積時間: 1時間

## 掲示板機能

### 🔴 投稿機能の実装

- [~] 投稿作成機能

  - [x] 投稿フォームの作成
  - [x] バリデーション実装
  - [ ] プレビュー機能
  - 見積時間: 3時間

- [~] 投稿一覧表示
  - [x] ページネーション実装（10件/ページ）
  - [x] 投稿者情報の表示
  - [x] 日時フォーマットの整備
  - 見積時間: 2時間

### 🟡 投稿管理機能

- [~] 投稿編集機能

  - [x] 編集フォームの作成
  - [x] 投稿者のみ編集可能な制御
  - [ ] プレビュー機能
  - 見積時間: 1時間

- [~] 投稿削除機能
  - [x] 削除確認ダイアログ
  - [x] 投稿者のみ削除可能な制御
  - [x] 論理削除の実装
  - 見積時間: 0.5時間

### 🟢 返信機能

- [x] 返信投稿機能
  - [x] 返信フォームの作成
  - [x] 親投稿との関連付け
  - [x] 返信一覧の表示
  - 見積時間: 3時間
- [x] 🔴 返信の投稿ボタンの挙動を修正する
  - [x] Server Actionからリダイレクト削除による状態管理問題を修正
  - [x] finally ブロックでisLoading状態のリセットを保証
  - [x] 成功時のページリロード実装
  - 見積時間: 0.5時間
- [x] 🟡 返信の編集フォームを`reply-form`にする
  - [x] ReplyFormコンポーネントの編集対応拡張
  - [x] updateReply Server Actionの実装
  - [x] 編集ページでの返信/通常投稿の条件分岐実装
  - 見積時間: 1時間
- [ ] 🔴 投稿、返信の削除メソッドを修正する（現在はエラーが出ている）
  - 詳細な手順や注意点
  - 依存関係
  - 見積時間:
- [ ] 🟢 ボタンを押した後、ローディングを追加する
  - 詳細な手順や注意点
  - 依存関係
  - 見積時間:

## UI/UX改善

### 🟡 レイアウトとデザイン

- [~] 共通レイアウトの改善

  - [x] ヘッダーナビゲーションの整備
  - [ ] レスポンシブ対応
  - 見積時間: 2時間

- [~] フォームデザインの統一
  - [x] 入力フォームのスタイル統一
  - [x] エラー表示の改善
  - 見積時間: 1時間

### 🔴 投稿関連

- [x] 投稿作成時のエラーと保存の不一致
  - 投稿フォームから送信後、エラーが表示されるがDBには投稿が保存され一覧に表示される問題を調査し修正する。
  - 原因特定
  - 修正実装
  - 見積時間: 1時間

## テストとデバッグ

### 🔴 テストフレームワーク導入

- [x] ユニットテストフレームワーク (Jest, React Testing Library) の導入 🔴

  - [x] Jest, @types/jest, ts-jest, @testing-library/react, @testing-library/jest-dom, jest-environment-jsdom のインストール
  - [x] jest.config.js の作成と設定
  - [x] jest.setup.js の作成と設定
  - [x] package.jsonへのテストスクリプト追加
  - 見積時間: 2時間

- [x] テストファイル構造を `__tests__` ディレクトリに変更 🟢
  - [x] `lib/__tests__/mathUtils.test.ts` へ移動/作成
  - [x] `components/__tests__/Greeting.test.tsx` へ移動/作成
  - [x] `tsconfig.json` に `@testing-library/jest-dom` の型定義を追加
  - 見積時間: 1時間

### 🔴 認証システムのテスト (Week 1) - 完了 ✅

- [x] ログインページのユニットテスト 🔴

  - [x] フォーム要素の表示確認テスト
  - [x] 必須項目の設定確認テスト
  - [x] エラー・成功メッセージの表示テスト
  - [x] フォーム入力値の設定テスト
  - 実装ファイル: `components/__tests__/auth/sign-in-page.test.tsx`
  - 見積時間: 2時間

- [x] 新規登録ページのユニットテスト 🔴

  - [x] フォーム要素の表示確認テスト
  - [x] 必須項目のバリデーションテスト
  - [x] メッセージ表示時の条件分岐テスト
  - [x] フォーム入力値の設定テスト
  - 実装ファイル: `components/__tests__/auth/sign-up-page.test.tsx`
  - 見積時間: 2時間

- [x] 新規登録確認ページのユニットテスト 🔴
  - [x] 確認画面の表示テスト
  - [x] 入力データの表示確認テスト
  - [x] パスワードマスク機能のテスト
  - 実装ファイル: `components/__tests__/auth/sign-up-confirm-page.test.tsx`
  - 見積時間: 1時間

### 🟡 CRUD操作のテスト (Week 2-3)

- [ ] PostFormコンポーネントのユニットテスト (投稿作成) 🟡

  - [ ] 新規投稿の作成テスト
  - [ ] タイトル・本文の必須チェック
  - [ ] 投稿成功時の処理テスト
  - 見積時間: 2時間

- [ ] PostListコンポーネントのユニットテスト (投稿一覧) 🟡

  - [ ] 投稿一覧の表示テスト
  - [ ] 自分の投稿のみ編集・削除ボタン表示テスト
  - [ ] ページネーションのテスト (実装されている場合)
  - 見積時間: 2時間

- [ ] PostEditFormコンポーネントのユニットテスト (投稿編集) 🟢

  - [ ] 既存データの読み込みテスト
  - [ ] 更新処理のテスト
  - [ ] 権限チェックのテスト
  - 見積時間: 1.5時間

- [ ] PostDeleteConfirmationコンポーネントのユニットテスト (投稿削除) 🟢
  - [ ] 削除確認ダイアログのテスト
  - [ ] 削除処理のテスト
  - [ ] キャンセル処理のテスト
  - 見積時間: 1時間

### 🟢 E2Eテスト実装

- [ ] E2Eテストの実装
  - [ ] 主要フローのテスト作成
  - [ ] CI/CD設定
  - 見積時間: 4時間

## バグ修正

### 🔴 認証関連

- [x] ログイン後のリダイレクト問題
  - [x] ミドルウェアのセッション管理の見直し
  - [x] Supabase セッション更新の確認
  - 見積時間: 2時間

### 🔴 Hydration関連

- [x] Hydration Mismatchエラーの修正
  - [x] date-fnsのformatDistanceToNowによるSSR/CSRの不整合を修正
  - [x] カスタムフック（useTimeAgo）の実装
  - [x] クライアントサイドでのみ時刻フォーマットを実行するように変更
  - 見積時間: 1時間
